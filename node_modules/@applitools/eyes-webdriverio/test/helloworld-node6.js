function main() {

    const webdriverio = require('webdriverio');
    const chromedriver = require('chromedriver');

    // Start chromedriver
    chromedriver.start();

    // Open a Chrome browser.
    const browserOptions = {
        port: '9515',
        path: '/',
        desiredCapabilities: {
            browserName: 'chrome',
            chromeOptions: {
                args: [
                    'disable-infobars',
                ]
            }
        }
    };

    const driver = webdriverio.remote(browserOptions);
    let browser = driver.init();

    // Initialize the eyes SDK and set your private API key.
    const EyesWebdriverio = require('../index');
    const Eyes = EyesWebdriverio.Eyes;
    const Target = EyesWebdriverio.Target;
    let eyes = new Eyes();
    eyes.setApiKey(process.env.APPLITOOLS_API_KEY);

    // Start the test and set the browser's viewport size to 800x600.
    return eyes.open(browser, 'Hello World!', 'My first Javascript test!', {width: 800, height: 600}).then(function () {
        // Navigate the browser to the "hello world!" web-site.
        return browser.url('https://applitools.com/helloworld');
    }).then(function () {
        // Visual checkpoint #1.
        return eyes.check('Main Page', Target.window());
    }).then(function () {
        // Click the "Click me!" button.
        return browser.click('button');
    }).then(function () {
        // Visual checkpoint #2.
        return eyes.check('Click!', Target.window());
    }).then(function () {
        // End the test.
        return eyes.close();
    }).then(function (res) {
        // Close the browser.
        return browser.end();
    }).catch(function (err) {
        // If the test was aborted before eyes.close was called ends the test as aborted.
        return eyes.abortIfNotClosed();
    }).then(function () {
        // Stop chromedriver
        chromedriver.stop();
    });
}

main();